<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BattleAura - Firmware Update</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="text-center" style="margin-bottom: var(--space-6);">
            <h1 style="font-size: 2rem; margin-bottom: var(--space-3);">üéØ Firmware Update</h1>
            <p><a href="/" class="link-primary">‚Üê Back to Control Panel</a></p>
        </header>

        <div class="form-container">
            <div style="background: rgba(124, 45, 18, 0.2); border: 1px solid #dc2626; padding: var(--space-4); border-radius: var(--radius-md); margin-bottom: var(--space-5);">
                <strong style="color: #fca5a5;">‚ö†Ô∏è Warning:</strong> Only upload firmware.bin files built for ESP32-C3!
            </div>

            <div class="card-header">
                <div class="card-icon">üì°</div>
                <div>
                    <h2 class="card-title">Upload New Firmware</h2>
                    <p class="card-description">Over-the-air firmware update</p>
                </div>
            </div>

            <form method='POST' enctype='multipart/form-data'>
                <div style="background: var(--bg-tertiary); padding: var(--space-5); border-radius: var(--radius-md); margin-bottom: var(--space-5);">
                    <div style="display: flex; align-items: center; margin-bottom: var(--space-3);">
                        <span style="background: var(--primary); color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: var(--space-3);">1</span>
                        <span style="font-weight: 600;">Build firmware:</span>
                    </div>
                    <code style="background: var(--bg-primary); padding: var(--space-2); border-radius: var(--radius-sm); display: block; font-family: var(--font-mono);">platformio run</code>
                </div>

                <div style="background: var(--bg-tertiary); padding: var(--space-5); border-radius: var(--radius-md); margin-bottom: var(--space-5);">
                    <div style="display: flex; align-items: center; margin-bottom: var(--space-3);">
                        <span style="background: var(--primary); color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: var(--space-3);">2</span>
                        <span style="font-weight: 600;">Locate file:</span>
                    </div>
                    <code style="background: var(--bg-primary); padding: var(--space-2); border-radius: var(--radius-sm); display: block; font-family: var(--font-mono);">.pio/build/seeed_xiao_esp32c3/firmware.bin</code>
                </div>

                <div style="background: var(--bg-tertiary); padding: var(--space-5); border-radius: var(--radius-md); margin-bottom: var(--space-6);">
                    <div style="display: flex; align-items: center; margin-bottom: var(--space-4);">
                        <span style="background: var(--primary); color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: var(--space-3);">3</span>
                        <span style="font-weight: 600;">Select and upload:</span>
                    </div>
                    
                    <div class="form-row">
                        <input type='file' name='update' accept='.bin' required 
                               style="padding: var(--space-3); background: var(--bg-primary); border: 2px dashed var(--border-primary); border-radius: var(--radius-md); color: var(--text-primary); width: 100%; cursor: pointer;"
                               onchange="this.style.borderColor = 'var(--border-accent)'">
                    </div>
                </div>

                <div class="text-center">
                    <input type='submit' value='üì° Upload Firmware' class='btn btn-warning' style="font-size: 1.1rem; padding: var(--space-4) var(--space-6);">
                </div>
            </form>
        </div>

        <div class="card">
            <h3 style="margin-bottom: var(--space-4);">üí° Update Tips</h3>
            <ul style="color: var(--text-secondary); line-height: 1.6;">
                <li><strong>Build first:</strong> Always build with PlatformIO before uploading</li>
                <li><strong>File location:</strong> Firmware is in .pio/build/seeed_xiao_esp32c3/</li>
                <li><strong>Stay connected:</strong> Keep device powered during update</li>
                <li><strong>Be patient:</strong> Update process takes 30-60 seconds</li>
            </ul>
        </div>
    </div>
</body>
</html>